@model Matchletic.Models.Recenzija

<div id="reviewModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg p-8 w-full max-w-md shadow-lg">
        <h2 class="text-xl font-semibold mb-4">Ocijeni meč</h2>
        <form id="reviewForm" asp-action="Create" asp-controller="Recenzija" method="post">
            <input type="hidden" name="MecID" value="@Model.MecID" />
            <div class="mb-4">
                <label class="block mb-2 font-medium">Ocjena:</label>
                <div id="starRating" class="flex space-x-1">
                    @for (int i = 1; i <= 5; i++)
                    {
                        <span class="star cursor-pointer text-3xl text-gray-300" data-value="@i">&#9733;</span>
                    }
                </div>
                <input type="hidden" id="Ocjena" name="Ocjena" value="0" />
            </div>
            <div class="mb-4">
                <label for="Komentar" class="block mb-2 font-medium">Komentar:</label>
                <textarea id="Komentar" name="Komentar" class="w-full border rounded p-2" rows="3"></textarea>
            </div>
            @Html.AntiForgeryToken()
            <div class="flex justify-end space-x-2">
                <button type="button" onclick="closeReviewModal()" class="px-4 py-2 rounded bg-gray-200 hover:bg-gray-300">Odustani</button>
                <button type="submit" class="px-4 py-2 rounded bg-blue-500 text-white hover:bg-blue-600">Pošalji</button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        // Star rating logic
        document.querySelectorAll('#starRating .star').forEach(star => {
            star.addEventListener('click', function () {
                let value = this.getAttribute('data-value');
                document.getElementById('Ocjena').value = value;
                document.querySelectorAll('#starRating .star').forEach(s => {
                    s.classList.toggle('text-yellow-400', s.getAttribute('data-value') <= value);
                    s.classList.toggle('text-gray-300', s.getAttribute('data-value') > value);
                });
            });
        });

        function showReviewModal() {
            document.getElementById('reviewModal').classList.remove('hidden');
        }
        function closeReviewModal() {
            document.getElementById('reviewModal').classList.add('hidden');
        }
    </script>
}
